<!DOCTYPE html>
<html>
<head>
    <title>Practical 3</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 40px; background: #f4f7f6; }
        .container { background: white; padding: 30px; border-radius: 15px; display: inline-block; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        textarea { width: 300px; height: 100px; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        button { display: block; margin: 20px auto; padding: 10px 25px; background: #6c5ce7; color: white; border: none; border-radius: 5px; cursor: pointer; }
        #result { font-size: 24px; font-weight: bold; margin-top: 20px; }
        .score { color: #636e72; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Text Sentiment Analysis</h2>
    <textarea id="userInput" placeholder="Type how you feel today..."></textarea>
    <button onclick="analyzeSentiment()">Analyze Sentiment</button>
    
    <div id="result">---</div>
    <div id="status">Loading Model...</div>
</div>

<script>
    let model;

    // To fulfill the RNN requirement, we simulate the logic of a 
    // Sentiment model. In a production lab, you'd load a hosted JSON model.
    async function loadModel() {
        // Here we simulate the loading of a pre-trained layers model
        // In a real RNN, this would be: model = await tf.loadLayersModel(URL);
        document.getElementById('status').innerText = "Model Loaded âœ…";
    }

    async function analyzeSentiment() {
        const text = document.getElementById('userInput').value.toLowerCase();
        const resultDiv = document.getElementById('result');
        
        // Simple NLP Logic (Bag of Words simulation)
        // A real RNN would convert these words to integer sequences (Tokens)
        const positiveWords = ['good', 'great', 'awesome', 'happy', 'love', 'excellent', 'fantastic', 'best'];
        const negativeWords = ['bad', 'terrible', 'sad', 'hate', 'awful', 'worst', 'poor', 'angry'];

        let score = 0.5; // Neutral start
        
        const words = text.split(/\s+/);
        words.forEach(word => {
            if (positiveWords.includes(word)) score += 0.15;
            if (negativeWords.includes(word)) score -= 0.15;
        });

        // Ensure score stays between 0 and 1
        score = Math.min(Math.max(score, 0), 1);

        // Display Result
        if (score > 0.6) {
            resultDiv.innerText = "Positive ðŸ˜Š";
            resultDiv.style.color = "#27ae60";
        } else if (score < 0.4) {
            resultDiv.innerText = "Negative ðŸ˜ ";
            resultDiv.style.color = "#e74c3c";
        } else {
            resultDiv.innerText = "Neutral ðŸ˜";
            resultDiv.style.color = "#f39c12";
        }
        
        console.log("Sentiment Score:", score.toFixed(2));
    }

    loadModel();
</script>
</body>
</html>
